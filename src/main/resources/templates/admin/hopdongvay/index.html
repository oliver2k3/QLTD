<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layoutadmin2}">
>
<script th:src="@{https://cdn.tailwindcss.com?plugins=forms,typography}"></script>
<script th:src="@{https://unpkg.com/unlazy@0.11.3/dist/unlazy.with-hashing.iife.js}" defer init></script>
<script type="text/javascript">
    window.tailwind.config = {
        darkMode: ['class'],
        theme: {
            extend: {
                colors: {
                    border: 'hsl(var(--border))',
                    input: 'hsl(var(--input))',
                    ring: 'hsl(var(--ring))',
                    background: 'hsl(var(--background))',
                    foreground: 'hsl(var(--foreground))',
                    primary: {
                        DEFAULT: 'hsl(var(--primary))',
                        foreground: 'hsl(var(--primary-foreground))'
                    },
                    secondary: {
                        DEFAULT: 'hsl(var(--secondary))',
                        foreground: 'hsl(var(--secondary-foreground))'
                    },
                    destructive: {
                        DEFAULT: 'hsl(var(--destructive))',
                        foreground: 'hsl(var(--destructive-foreground))'
                    },
                    muted: {
                        DEFAULT: 'hsl(var(--muted))',
                        foreground: 'hsl(var(--muted-foreground))'
                    },
                    accent: {
                        DEFAULT: 'hsl(var(--accent))',
                        foreground: 'hsl(var(--accent-foreground))'
                    },
                    popover: {
                        DEFAULT: 'hsl(var(--popover))',
                        foreground: 'hsl(var(--popover-foreground))'
                    },
                    card: {
                        DEFAULT: 'hsl(var(--card))',
                        foreground: 'hsl(var(--card-foreground))'
                    },
                },
            }
        }
    }
</script>
<style type="text/tailwindcss">
    @layer base {
        :root {
            --background: 0 0% 100%;
            --foreground: 240 10% 3.9%;
            --card: 0 0% 100%;
            --card-foreground: 240 10% 3.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 240 10% 3.9%;
            --primary: 240 5.9% 10%;
            --primary-foreground: 0 0% 98%;
            --secondary: 240 4.8% 95.9%;
            --secondary-foreground: 240 5.9% 10%;
            --muted: 240 4.8% 95.9%;
            --muted-foreground: 240 3.8% 46.1%;
            --accent: 240 4.8% 95.9%;
            --accent-foreground: 240 5.9% 10%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 0 0% 98%;
            --border: 240 5.9% 90%;
            --input: 240 5.9% 90%;
            --ring: 240 5.9% 10%;
            --radius: 0.5rem;
        }
        .dark {
            --background: 240 10% 3.9%;
            --foreground: 0 0% 98%;
            --card: 240 10% 3.9%;
            --card-foreground: 0 0% 98%;
            --popover: 240 10% 3.9%;
            --popover-foreground: 0 0% 98%;
            --primary: 0 0% 98%;
            --primary-foreground: 240 5.9% 10%;
            --secondary: 240 3.7% 15.9%;
            --secondary-foreground: 0 0% 98%;
            --muted: 240 3.7% 15.9%;
            --muted-foreground: 240 5% 64.9%;
            --accent: 240 3.7% 15.9%;
            --accent-foreground: 0 0% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 0 0% 98%;
            --border: 240 3.7% 15.9%;
            --input: 240 3.7% 15.9%;
            --ring: 240 4.9% 83.9%;
        }
    }
</style>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div layout:fragment="content">

    <h2 class="text-3xl font-bold mb-4">Hợp đồng vay</h2>
    <div  th:each="hopdongvay : ${hopdongvays}" class="bg-background text-primary-foreground dark:bg-primary dark:text-primary-foreground p-6 border border-gray-200 rounded-lg my-4">


        <div class="overflow-x-auto">
            <table class="min-w-full bg-white dark:bg-card">
                <thead>
                <tr class="w-full bg-card dark:bg-card-foreground text-left">
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Mã hợp đồng</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Số tiền vay</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Lãi suất</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Kì hạn</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Tổng tiền lãi</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Tổng tiền phải trả</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Khoản thanh toán hàng kì</th>

                </tr>
                </thead>
                <tbody>
                <tr class="border-b border-card dark:border-card-foreground">
                    <td class="py-3 px-4" th:text="${hopdongvay.id}"></td>
                    <td class="py-3 px-4" th:text="${#numbers.formatDecimal(hopdongvay.CT_HDV.soTien, 0, 'COMMA', 0, 'POINT')} + ' vnđ'"></td>
                    <td class="py-3 px-4" th:text="${hopdongvay.CT_HDV.laiSuat}"></td>
                    <td class="py-3 px-4" th:text="${hopdongvay.CT_HDV.thoiHan } +'tháng' "></td>
                    <td class="py-3 px-4" th:text="${#numbers.formatDecimal(hopdongvay.CT_HDV.tongLai, 0, 'COMMA', 0, 'POINT')} + ' vnđ'"></td>
                    <td class="py-3 px-4" th:text="${#numbers.formatDecimal(hopdongvay.CT_HDV.tongTien, 0, 'COMMA', 0, 'POINT')} + ' vnđ'"></td>
                    <td class="py-3 px-4" th:text="${hopdongvay.CT_HDV.emi}"></td>

                </tr>
                </tbody>
            </table>
        </div>

        <div class="overflow-x-auto mt-4">
            <table class="min-w-full bg-white dark:bg-card">
                <thead>
                <tr class="w-full bg-card dark:bg-card-foreground text-left">
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Đã trả</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Còn lại</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Lần thanh toán gần nhất</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Hạn thanh toán kì này</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Số tiền thanh toán kì này</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Ngày hết hạn hợp đồng</th>

                </tr>
                </thead>
                <tbody>
                <tr class="border-b border-card dark:border-card-foreground">
                    <td class="py-3 px-4" th:text="${#numbers.formatDecimal(hopdongvay.CT_HDV.daTra, 0, 'COMMA', 0, 'POINT')} + ' vnđ'"></td>
                    <td class="py-3 px-4" th:text="${#numbers.formatDecimal(hopdongvay.CT_HDV.conLai, 0, 'COMMA', 0, 'POINT')} + ' vnđ'"></td>
                    <td class="py-3 px-4" th:text="${#temporals.format(hopdongvay.getCT_HDV().ngayTraGanNhat, 'dd-MM-yyyy')}"></td>
                    <td class="py-3 px-4" th:text="${#temporals.format(hopdongvay.getCT_HDV().ngayTraTiepTheo, 'dd-MM-yyyy')}"></td>
                    <td class="py-3 px-4" th:text="${#numbers.formatDecimal(hopdongvay.CT_HDV.soTienKinay, 0, 'COMMA', 0, 'POINT')} + ' vnđ'"></td>
                    <td class="py-3 px-4" th:text="${#temporals.format(hopdongvay.getCT_HDV().ngayHetHan, 'dd-MM-yyyy')}"></td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="overflow-x-auto mt-4">
            <table class="min-w-full bg-white dark:bg-card">
                <thead>
                <tr class="w-full bg-card dark:bg-card-foreground text-left">
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Tên khách hàng</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Địa chỉ Email</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Số điện thoại</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Địa chỉ</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Công việc</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Mức lương</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Ngày sinh</th>
                </tr>
                </thead>
                <tbody>
                <tr class="border-b border-card dark:border-card-foreground">
                    <td class="py-3 px-4" th:text="${hopdongvay.name}"></td>
                    <td class="py-3 px-4" th:text="${hopdongvay.email}"></td>
                    <td class="py-3 px-4" th:text="${hopdongvay.phone}"></td>
                    <td class="py-3 px-4" th:text="${hopdongvay.address}"></td>
                    <td class="py-3 px-4" th:text="${hopdongvay.job}"></td>
                    <td class="py-3 px-4" th:text="${#numbers.formatDecimal(hopdongvay.salary, 0, 'COMMA', 0, 'POINT')} + ' vnđ'"></td>
                    <td class="py-3 px-4" th:text="${#temporals.format(hopdongvay.birthDay, 'dd-MM-yyyy')}"></td>



                </tr>
                </tbody>
            </table>
        </div>
        <div class="overflow-x-auto mt-4">
            <div class="overflow-x-auto mt-4">
                <div class="flex justify-around">
                    <img th:src="@{${'/images/hopdongvay/' + hopdongvay.cccdImage1}}" style="max-width:400px" alt="CCCD trước" class="w-1/2 p-2">
                    <img th:src="@{${'/images/hopdongvay/' + hopdongvay.cccdImage2}}" style="max-width:400px" alt="CCCD sau" class="w-1/2 p-2">
                </div>
            </div>
        </div>
        <div class="overflow-x-auto mt-4">
            <table class="min-w-full bg-white dark:bg-card">
                <thead>
                <tr class="w-full bg-card dark:bg-card-foreground text-left">
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Tên công ty</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Chức vụ</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Trạng thái hôn nhân</th>
                    <th class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Trạng thái hợp đồng</th>
                    <th  th:if="${hopdongvay.status.id} != 1"  class="py-3 px-4 font-semibold text-card dark:text-card-foreground">Chỉnh sửa trạng thái</th>
                </tr>
                </thead>
                <tbody>
                <tr class="border-b border-card dark:border-card-foreground">
                    <td class="py-3 px-4" th:text="${hopdongvay.industryName}"></td>
                    <td class="py-3 px-4" th:text="${hopdongvay.industryPosition}"></td>
                    <td class="py-3 px-4" th:text="${hopdongvay.maritalStatus}"></td>
                    <td class="py-3 px-4" th:text="${hopdongvay.status.name}"></td>


                    <td class="py-3 px-4" th:if="${hopdongvay.status.id} == 1"  >
                        <form  th:action="@{/admin/hopdongvay/xacnhan/{hdvId}(hdvId= ${hopdongvay.id})}" class="form-control" method="post">
                            <button type="submit" class="btn btn-primary">Xác nhận</button>
                        </form>
                    </td>
                    <td class="py-3 px-4" th:if="${hopdongvay.status.id} == 1"  >
                        <form  th:action="@{/admin/hopdongvay/tuchoi/{hdvId}(hdvId= ${hopdongvay.id})}" class="form-control" method="post">
                            <button type="submit" class="btn btn-primary">Từ chối</button>
                        </form>
                    </td>
                    <td class="py-3 px-4" th:if="${hopdongvay.status.id} != 1"  >
                        <form  class="form-control"  th:action="@{/admin/hopdongvay/editstatus/{id}(id= ${hopdongvay.id})}" method="post">

                            <div class="col-md-12">
                                <label for="status" ></label>
                                <select class="form-select" id="status" name="status">
                                    <option value="1">Chờ xác nhận</option>
                                    <option value="2">Đã xác nhận</option>
                                    <option value="3">Chờ thanh toán</option>
                                    <option value="4">Đã thanh toán</option>
                                    <option value="5">Đã từ chối</option>
                                </select>
                            </div>
                            <div class="col-md-12">
                                <input type="submit" value="Submit" class="thm-btn">
                            </div>
                        </form>
                    </td>
                    <td class="py-3 px-4"  >
                        <form  th:action="@{/admin/download/{docfile}(docfile= ${hopdongvay.documentFile})}" class="form-control" method="get">
                            <button type="submit" class="btn btn-primary">Tải tài liệu</button>
                        </form>
                    </td>

                </tr>
                </tbody>
            </table>
        </div>

    </div>


</div>
</body>
</html>